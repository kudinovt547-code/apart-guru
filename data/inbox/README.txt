# Data Inbox — Исходные файлы статистики

Сюда класть файлы статистики и таблицы для импорта на сайт.

## Два типа данных:

### 1. Готовые апартаменты (с полными данными)
**Имя файла должно содержать:** `FullCards`
**Пример:** ApartPro_Stats_FullCards_Only_v1.xlsx

**Обязательные колонки:**
- Объект (название)
- Стоимость, ₽
- Площадь, м²
- Доходность ₽/м²/мес
- NOI в год
- Окупаемость, лет
- Загрузка, %
- ADR, ₽
- Формат (Апарт-отель / Квартира)
- Уровень риска (низкий / средний / высокий)
- Источник
- Лист/ID

### 2. Проекты в строительстве (только цена и площадь)
**Имя файла должно содержать:** `Construction`
**Пример:** ApartPro_Construction_Only_PriceArea_v1.xlsx

**Обязательные колонки:**
- Проект (название)
- Город
- Стоимость, ₽
- Площадь, м²
- Цена, ₽/м²
- Срок сдачи (норм.)
- Статус/срок
- Формат/класс
- Девелопер/застройщик
- Ссылка

## Использование:

1. Положите оба файла (или один из них) в эту папку (data/inbox/)

2. Запустите импорт:
```bash
npm run import:stats
```

3. Перезапустите сервер:
```bash
npm run dev
```

## Что происходит при импорте:

- Скрипт ищет оба файла (*FullCards*.xlsx и *Construction*.xlsx)
- Парсит готовые апартаменты → статус "active" (готовые)
- Парсит проекты в строительстве → статус "construction" (в стройке)
- Объединяет в один массив
- Создаёт stats.generated.json в двух местах:
  * data/content/stats.generated.json (бэкап)
  * src/data/stats.generated.json (для Next.js)
- Показывает отчёт с разбивкой:
  * Готовые апартаменты с топ-10 по доходности
  * Примеры проектов в строительстве

## На сайте:

**Готовые апартаменты (status: "active"):**
- Показываются все показатели доходности
- График сезонности
- Полная статистика NOI, окупаемости, загрузки

**В строительстве (status: "construction"):**
- Показывается только цена, площадь, застройщик, срок сдачи
- Калькулятор прогнозирования доходности с 3 сценариями
- Возможность ввести предполагаемые ADR и загрузку

**Фильтры на /projects:**
- Фильтр "Все статусы" → "Готовые апартаменты" / "В строительстве"
- Визуально разные карточки для разных типов

## Альтернативный вариант (JSON):

Можно также загрузить готовый JSON файл (любое имя .json) с полной структурой:

```json
{
  "objects": [
    {
      "slug": "object-id",
      "title": "Название",
      "status": "active",  // или "construction"
      "price": 5000000,
      "area": 40,
      // ... остальные поля
    }
  ],
  "sources": {
    "updatedAt": "2026-01-21",
    "source": "Источник данных"
  }
}
```

## Примечания:

- Можно загрузить только один тип файлов (система гибкая)
- JSON файлы имеют приоритет над Excel (если есть)
- Старые файлы можно удалять после импорта
- Файлы .xlsx и .json игнорируются в git (.gitignore)
- Файлы могут называться как угодно, главное чтобы содержали ключевые слова FullCards или Construction

Подробные примеры структуры см. в EXAMPLE_STRUCTURE.md
